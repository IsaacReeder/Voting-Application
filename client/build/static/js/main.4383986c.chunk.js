(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{108:function(e,t,c){"use strict";c.r(t);var s=c(2),n=c(1),a=c.n(n),r=c(12),l=c.n(r),i=(c(62),c(3)),o=(c(63),c(64),c(33)),j=c(11),d=c.n(j),b=(c(43),c(53)),u=c.n(b),h=c(22),m=function(e){var t=e.poll;return Object(s.jsx)("div",{className:"card border-dark mb-3",children:Object(s.jsxs)("div",{className:"row no-gutters",children:[Object(s.jsx)("div",{className:"col-md-4",children:Object(s.jsx)(h.a,{data:t.options.map((function(e,c){return{angle:t.votes.reduce((function(t,c){return c.option===e?t+1:t}),0),name:e}})),showLabels:!0,width:150,height:150})}),Object(s.jsx)("div",{className:"col-md-8",children:Object(s.jsxs)("div",{className:"card-body",children:[Object(s.jsx)("h5",{className:"card-title",children:Object(s.jsx)("a",{href:!0,onClick:function(c){return e.setPage(["vote",{poll:t}])},children:t.question})}),Object(s.jsx)("p",{className:"card-text",children:t.options.map((function(e,c){var n=t.votes.reduce((function(t,c){return c.option===e?t+1:t}),0);return Object(s.jsxs)("span",{children:[e,": ",n," votes."," "]},c)}))}),Object(s.jsx)("p",{className:"card-text",children:Object(s.jsxs)("small",{className:"text-muted",children:["(",Object(s.jsx)(u.a,{parse:"YYYY-MM-DDTHH:mm:ss.SSSZ",tz:"America/Santiago",fromNow:!0,children:t.createdAt}),")"]})})]})})]})})},O=c(8),x=function(e){var t=Object(n.useState)(""),c=Object(i.a)(t,2),a=c[0],r=c[1],l=Object(n.useState)([]),j=Object(i.a)(l,2),b=j[0],u=j[1],h=Object(n.useState)([]),x=Object(i.a)(h,2),p=x[0],v=x[1];return Object(n.useEffect)((function(){d.a.get("http://localhost:9000/api/polls").then((function(e){var t=Object(o.a)(e.data).sort((function(e,t){return t.number_of_votes-e.number_of_votes})).slice(0,3);u(t);var c=Object(o.a)(e.data).filter((function(e){return-1===t.indexOf(e)}));v(c)})).catch((function(e){return r(e)}))}),[]),Object(s.jsxs)(s.Fragment,{children:[""!==a&&Object(s.jsx)(O.a,{variant:"danger",children:Object(s.jsx)("p",{children:a})}),Object(s.jsxs)("div",{className:"row",children:[Object(s.jsx)("div",{className:"col"}),Object(s.jsx)("div",{className:"col clearfix",children:Object(s.jsx)("button",{type:"button",className:"btn btn-primary float-right",onClick:function(t){return e.setPage(["create",{}])},children:"Create your own poll"})})]}),Object(s.jsxs)("div",{className:"row",children:[Object(s.jsxs)("div",{className:"col",children:[Object(s.jsx)("h2",{children:"Top 3 polls"}),Object(s.jsxs)("div",{className:"content",children:[0!==b.length&&b.map((function(t,c){return Object(s.jsx)(m,{poll:t,setPage:e.setPage},c)})),0===b.length&&Object(s.jsx)("div",{children:"No poll available"})]})]}),Object(s.jsxs)("div",{className:"col",children:[Object(s.jsx)("h2",{children:"Recent polls"}),Object(s.jsxs)("div",{className:"content",children:[0!==p.length&&p.map((function(t,c){return Object(s.jsx)(m,{poll:t,setPage:e.setPage},c)})),0===p.length&&Object(s.jsx)("div",{children:"No poll available"})]})]})]})]})},p=function(e){var t=e.setPage,c=Object(n.useState)(""),a=Object(i.a)(c,2),r=a[0],l=a[1],o=Object(n.useState)(""),j=Object(i.a)(o,2),b=j[0],u=j[1],h=Object(n.useState)(""),m=Object(i.a)(h,2),x=m[0],p=m[1],v=Object(n.useState)(""),f=Object(i.a)(v,2),N=f[0],g=f[1],w=Object(n.useState)(""),y=Object(i.a)(w,2),P=y[0],S=y[1],C=Object(n.useState)(""),T=Object(i.a)(C,2),k=T[0],F=T[1];return Object(s.jsxs)(s.Fragment,{children:[""!==k&&Object(s.jsx)(O.a,{variant:"danger",children:Object(s.jsx)("p",{children:k})}),Object(s.jsxs)("div",{className:"row",children:[Object(s.jsx)("div",{className:"col"}),Object(s.jsx)("div",{className:"col clearfix",children:Object(s.jsx)("button",{type:"button",className:"btn btn-primary float-right",onClick:function(t){return e.setPage(["home",{}])},children:"Go back"})})]}),Object(s.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),r.length<10)return F("Question is required and must be at least 10 characters long");var c=[];if(""!==b&&c.push(b),""!==x&&c.push(x),""!==N&&c.push(N),""!==P&&c.push(P),r.length<10)return F("Question is required and must be at least 10 characters long");if(c.length<2)return F("Options must be at least 2");var s=[];F(""),console.log(r,c,s,0),d.a.post("http://localhost:9000/api/polls",{question:r,options:c,votes:s,number_of_votes:0}).then((function(e){return t(["home",{}])})).catch((function(e){return F(e.message)}))},children:[Object(s.jsxs)("div",{className:"row",children:[Object(s.jsx)("div",{className:"col",children:Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{htmlFor:"questionTextArea",children:"Your Question: *"}),Object(s.jsx)("input",{type:"text",className:"form-control",id:"questionTextArea",rows:"3",onChange:function(e){return l(e.target.value)}})]})}),Object(s.jsx)("div",{className:"col",children:Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{htmlFor:"option1Text",children:"Option 1: *"}),Object(s.jsx)("input",{type:"text",className:"form-control",id:"option1Text",onChange:function(e){return u(e.target.value)}})]})})]}),Object(s.jsxs)("div",{className:"row",children:[Object(s.jsx)("div",{className:"col"}),Object(s.jsx)("div",{className:"col",children:Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{htmlFor:"option2Text",children:"Option 2: *"}),Object(s.jsx)("input",{type:"text",className:"form-control",id:"option2Text",onChange:function(e){return p(e.target.value)}})]})})]}),Object(s.jsxs)("div",{className:"row",children:[Object(s.jsx)("div",{className:"col"}),Object(s.jsx)("div",{className:"col",children:Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{htmlFor:"option3Text",children:"Option 3: "}),Object(s.jsx)("input",{type:"text",className:"form-control",id:"option3Text",onChange:function(e){return g(e.target.value)}})]})})]}),Object(s.jsxs)("div",{className:"row",children:[Object(s.jsxs)("div",{className:"col",children:[Object(s.jsx)("button",{type:"button",className:"btn btn-danger",onClick:function(t){return e.setPage(["home",{}])},children:"Cancel"}),"\xa0",Object(s.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit Poll"}),Object(s.jsx)("br",{}),"NOTE: fields marked with an * are mandatory"]}),Object(s.jsx)("div",{className:"col",children:Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{htmlFor:"option4Text",children:"Option 4: "}),Object(s.jsx)("input",{type:"text",className:"form-control",id:"option4Text",onChange:function(e){return S(e.target.value)}})]})})]})]})]})},v=function(e){var t=Object(n.useState)(""),c=Object(i.a)(t,2),a=c[0],r=c[1],l=e.poll,o=e.setPage,j=["btn-primary","btn-secondary","btn-success","btn-info"];return Object(s.jsxs)(s.Fragment,{children:[""!==a&&Object(s.jsx)(O.a,{variant:"danger",children:Object(s.jsx)("p",{children:a})}),Object(s.jsxs)("div",{className:"row",children:[Object(s.jsx)("div",{className:"col"}),Object(s.jsx)("div",{className:"col clearfix",children:Object(s.jsx)("button",{type:"button",className:"btn btn-primary float-right",onClick:function(t){return e.setPage(["home",{}])},children:"Go back"})})]}),Object(s.jsx)("div",{className:"row",children:Object(s.jsx)("div",{className:"col",children:Object(s.jsx)("h2",{children:l.question})})}),Object(s.jsx)("div",{className:"d-flex flex-wrap",children:l.options.map((function(e,t){return Object(s.jsxs)("div",{className:"card",style:{width:"40%",margin:"1% 5%"},children:[Object(s.jsx)("div",{className:"card-body",children:Object(s.jsx)("h5",{className:"card-title",children:e})}),Object(s.jsx)("div",{className:"card-footer",children:Object(s.jsxs)("button",{onClick:function(t){!function(e,t){e.preventDefault(),d.a.post("http://localhost:9000/api/poll/".concat(l._id,"/vote"),{option:t}).then((function(e){o(["result",{poll:e.data}])})).catch((function(e){return r(e.message)}))}(t,e)},className:"btn ".concat(j[t]),children:["Vote ",e]})})]},t)}))})]})},f=function(e){var t=e.poll,c=e.setPage,n=["red","blue","orange","green"];return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("div",{className:"row",children:[Object(s.jsx)("div",{className:"col"}),Object(s.jsx)("div",{className:"col clearfix",children:Object(s.jsx)("button",{type:"button",className:"btn btn-primary float-right",onClick:function(e){return c(["home",{}])},children:"Go back"})})]}),Object(s.jsx)("div",{className:"row",children:Object(s.jsxs)("div",{className:"col",children:[Object(s.jsx)(O.a,{variant:"success",children:"Thanks for voting! Here are the results."}),Object(s.jsx)("h2",{children:t.question})]})}),Object(s.jsxs)("div",{className:"row",children:[Object(s.jsx)("div",{className:"col",children:Object(s.jsx)(h.a,{className:"donut-chart-example",innerRadius:100,radius:140,data:t.options.map((function(e,c){return{angle:t.votes.reduce((function(t,c){return c.option===e?t+1:t}),0),label:e,color:n[c]}})),showLabels:!0,width:300,height:300})}),Object(s.jsx)("div",{className:"col",children:t.options.map((function(e,c){var n=t.votes.reduce((function(t,c){return c.option===e?t+1:t}),0);return Object(s.jsxs)("div",{className:"d-flex",children:[Object(s.jsx)("div",{className:"mr-auto p-2",children:e}),Object(s.jsxs)("div",{className:"p-2",children:[n," votes"]})]},c)}))}),Object(s.jsx)("div",{className:"col"})]})]})};var N=function(){var e=Object(n.useState)(["home",{}]),t=Object(i.a)(e,2),c=t[0],a=t[1];return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{className:"jumbotron jumbotron-fluid",children:Object(s.jsx)("div",{className:"container",children:Object(s.jsx)("h1",{className:"display-4",children:"Don\u2019t Be a Loser, Be a Chooser!"})})}),Object(s.jsxs)("div",{className:"App",children:["home"===c[0]&&Object(s.jsx)(x,{setPage:a}),"create"===c[0]&&Object(s.jsx)(p,{setPage:a}),"vote"===c[0]&&Object(s.jsx)(v,{poll:c[1].poll,setPage:a}),"result"===c[0]&&Object(s.jsx)(f,{poll:c[1].poll,setPage:a})]})]})},g=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,111)).then((function(t){var c=t.getCLS,s=t.getFID,n=t.getFCP,a=t.getLCP,r=t.getTTFB;c(e),s(e),n(e),a(e),r(e)}))};l.a.render(Object(s.jsx)(a.a.StrictMode,{children:Object(s.jsx)(N,{})}),document.getElementById("root")),g()},62:function(e,t,c){},64:function(e,t,c){}},[[108,1,2]]]);
//# sourceMappingURL=main.4383986c.chunk.js.map